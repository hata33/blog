"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5433],{9019:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>c,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"\u624b\u5199\u4ee3\u7801/js\u624b\u5199","title":"js\u624b\u5199","description":"1.\u6570\u7ec4\u53bb\u91cd\u3001\u6241\u5e73\u3001\u6700\u503c","source":"@site/docs/50-\u624b\u5199\u4ee3\u7801/1-js\u624b\u5199.md","sourceDirName":"50-\u624b\u5199\u4ee3\u7801","slug":"/\u624b\u5199\u4ee3\u7801/js\u624b\u5199","permalink":"/blog/docs/\u624b\u5199\u4ee3\u7801/js\u624b\u5199","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"tsconfig.json","permalink":"/blog/docs/TypeScript/tsconfig"},"next":{"title":"\u5b9e\u73b0\u573a\u666f","permalink":"/blog/docs/\u624b\u5199\u4ee3\u7801/\u5b9e\u73b0\u573a\u666f"}}');var a=e(4848),l=e(8453);const c={},o=void 0,s={},i=[{value:"1.\u6570\u7ec4\u53bb\u91cd\u3001\u6241\u5e73\u3001\u6700\u503c",id:"1\u6570\u7ec4\u53bb\u91cd\u6241\u5e73\u6700\u503c",level:3},{value:"\u53bb\u91cd",id:"\u53bb\u91cd",level:4},{value:"\u6839\u636e\u5bf9\u8c61 id \u53bb\u91cd\u6570\u7ec4\u4e2d\u5bf9\u8c61\u7684\u65b9\u6cd5",id:"\u6839\u636e\u5bf9\u8c61-id-\u53bb\u91cd\u6570\u7ec4\u4e2d\u5bf9\u8c61\u7684\u65b9\u6cd5",level:5},{value:"\u6241\u5e73",id:"\u6241\u5e73",level:4},{value:"\u6700\u503c",id:"\u6700\u503c",level:4},{value:"2. \u9632\u6296\u548c\u8282\u6d41",id:"2-\u9632\u6296\u548c\u8282\u6d41",level:3},{value:"\u9632\u6296",id:"\u9632\u6296",level:4},{value:"\u539f\u7406\u53ca\u4f7f\u7528\u573a\u666f",id:"\u539f\u7406\u53ca\u4f7f\u7528\u573a\u666f",level:5},{value:"\u8282\u6d41",id:"\u8282\u6d41",level:4},{value:"\u539f\u7406\u53ca\u4f7f\u7528\u573a\u666f",id:"\u539f\u7406\u53ca\u4f7f\u7528\u573a\u666f-1",level:4},{value:"3.\u6df1\u6d45\u62f7\u8d1d",id:"3\u6df1\u6d45\u62f7\u8d1d",level:3},{value:"\u6d45\u62f7\u8d1d",id:"\u6d45\u62f7\u8d1d",level:4},{value:"\u6df1\u62f7\u8d1d",id:"\u6df1\u62f7\u8d1d",level:4}];function u(n){const r={blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.h3,{id:"1\u6570\u7ec4\u53bb\u91cd\u6241\u5e73\u6700\u503c",children:"1.\u6570\u7ec4\u53bb\u91cd\u3001\u6241\u5e73\u3001\u6700\u503c"}),"\n",(0,a.jsx)(r.h4,{id:"\u53bb\u91cd",children:"\u53bb\u91cd"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:"function uniqueArray(arr) {\r\n  return [...new Set(arr)];\r\n}\r\nconst array = [2, 3, 4, 4, 3, 2, 1];\r\nconst unique = uniqueArray(array);\r\nconsole.log(unique); // \u8f93\u51fa: [1, 2, 3, 4]\n"})}),"\n",(0,a.jsx)(r.h5,{id:"\u6839\u636e\u5bf9\u8c61-id-\u53bb\u91cd\u6570\u7ec4\u4e2d\u5bf9\u8c61\u7684\u65b9\u6cd5",children:"\u6839\u636e\u5bf9\u8c61 id \u53bb\u91cd\u6570\u7ec4\u4e2d\u5bf9\u8c61\u7684\u65b9\u6cd5"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'// \u53ef\u4ee5\u4f7f\u7528Map,Set,filter, forEach \u7ec4\u5408\u4e00\u4e2a\u5224\u91cd\u903b\u8f91\uff0c\u6765\u5b9e\u73b0\u53bb\u91cd\r\nconst array = [\r\n  { id: 1, name: "Alice" },\r\n  { id: 2, name: "Bob" },\r\n  { id: 1, name: "Alice" },\r\n  { id: 3, name: "Charlie" },\r\n];\r\n\r\nconst uniqueArray1 = Array.from(\r\n  new Map(array.map((item) => [item.id, item])).values()\r\n);\r\n\r\nconst uniqueArray2 = Array.from(\r\n  new Set(array.map((item) => JSON.stringify(item)))\r\n).map((item) => JSON.parse(item));\r\n\r\nconst uniqueArray3 = array.filter(\r\n  (item, index, self) => index === self.findIndex((obj) => obj.id === item.id)\r\n);\r\n\r\nconst uniqueArray4 = [];\r\narray.forEach((item) => {\r\n  if (!uniqueArray4.some((obj) => obj.id === item.id)) {\r\n    uniqueArray4.push(item);\r\n  }\r\n});\n'})}),"\n",(0,a.jsx)(r.h4,{id:"\u6241\u5e73",children:"\u6241\u5e73"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:"const flat = (array) => {\r\n  let result = [];\r\n  for (let i = 0; i < array.length; i++) {\r\n    if (Array.isArray(array[i])) {\r\n      result = [...result, ...flat(array[i])];\r\n    } else {\r\n      result.push(array[i]);\r\n    }\r\n  }\r\n  return result;\r\n};\n"})}),"\n",(0,a.jsx)(r.p,{children:"\u4f7f\u7528 reduce \u7b80\u5316"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:"const flat = (array) => {\r\n  return array.reduce(\r\n    (target, current) =>\r\n      Array.isArray(current)\r\n        ? target.concat(flat(current))\r\n        : target.concat(current),\r\n    []\r\n  );\r\n};\n"})}),"\n",(0,a.jsx)(r.h4,{id:"\u6700\u503c",children:"\u6700\u503c"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:"array.reduce((c, n) => Math.max(c, n));\r\n\r\nconst array = [3, 2, 1, 4, 5];\r\nMath.max.apply(null, array);\r\nMath.max(...array);\n"})}),"\n",(0,a.jsx)(r.p,{children:"\u6839\u636e\u6307\u5b9a\u6df1\u5ea6\u6241\u5e73\u6570\u7ec4"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:"const flattenByDeep = (array, deep = 1) => {\r\n  return array.reduce(\r\n    (target, current) =>\r\n      Array.isArray(current) && deep > 1\r\n        ? target.concat(flat(current, deep - 1))\r\n        : target.concat(current),\r\n    []\r\n  );\r\n};\n"})}),"\n",(0,a.jsx)(r.h3,{id:"2-\u9632\u6296\u548c\u8282\u6d41",children:"2. \u9632\u6296\u548c\u8282\u6d41"}),"\n",(0,a.jsx)(r.h4,{id:"\u9632\u6296",children:"\u9632\u6296"}),"\n",(0,a.jsx)(r.h5,{id:"\u539f\u7406\u53ca\u4f7f\u7528\u573a\u666f",children:"\u539f\u7406\u53ca\u4f7f\u7528\u573a\u666f"}),"\n",(0,a.jsx)(r.p,{children:"\u9632\u6296\u51fd\u6570\u7684\u539f\u7406\u4e3b\u8981\u662f\u901a\u8fc7\u63a7\u5236\u51fd\u6570\u7684\u6267\u884c\u9891\u7387\u6765\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u8c03\u7528\u3002\u7528\u4e8e\u9650\u5236\u9ad8\u9891\u7387\u4e8b\u4ef6\uff08\u5982\u8f93\u5165\u3001\u6eda\u52a8\u3001\u8c03\u6574\u7a97\u53e3\u5927\u5c0f\u7b49\uff09\u5bf9\u67d0\u4e2a\u51fd\u6570\u7684\u8c03\u7528\u3002"}),"\n",(0,a.jsx)(r.p,{children:"\u539f\u7406\uff1a\u9632\u6296\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u51fd\u6570\u548c\u5ef6\u8fdf\u65f6\u95f4\u3002\u6bcf\u5f53\u4e8b\u4ef6\u89e6\u53d1\u65f6\uff0c\u9632\u6296\u51fd\u6570\u4f1a\u6e05\u9664\u4e0a\u4e00\u4e2a\u8ba1\u65f6\u5668\uff08clearTimeout\uff09\uff0c\u91cd\u65b0\u542f\u52a8\u65b0\u7684\u8ba1\u65f6\u5668\u3002\u5982\u679c\u5728\u5ef6\u8fdf\u65f6\u95f4\u5185\u6ca1\u6709\u518d\u6b21\u89e6\u53d1\u4e8b\u4ef6\uff0c\u8ba1\u65f6\u5668\u5230\u671f\u540e\uff0c\u4f20\u5165\u7684\u51fd\u6570\u624d\u4f1a\u88ab\u6267\u884c\u3002"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'function debounce(fn, wait) {\r\n  let timeout;\r\n  return function () {\r\n    const args = arguments;\r\n    if (timeout) {\r\n      clearTimeout(timeout);\r\n    }\r\n    timeout = setTimeout(function () {\r\n      fn.apply(this, args);\r\n    }, wait);\r\n  };\r\n}\r\n\r\n// \u4f7f\u7528\u793a\u4f8b\r\nconst myEfficientFn = debounce(function () {\r\n  // \u9700\u8981\u9632\u6296\u6267\u884c\u7684\u51fd\u6570\r\n  console.log("\u6267\u884cFunction");\r\n}, 250);\r\nwindow.addEventListener("resize", myEfficientFn);\n'})}),"\n",(0,a.jsx)(r.p,{children:"ts \u7248\u672c"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-ts",children:"type Callback = (...args: any[]) => void;\r\n\r\nconst debounce = (fn: Callback, wait: number): Callback => {\r\n  let timeout: NodeJS.Timeout | undefined;\r\n\r\n  return function (...args: any[]) {\r\n    if (timeout) {\r\n      clearTimeout(timeout);\r\n    }\r\n    timeout = setTimeout(() => {\r\n      fn.apply(this, args);\r\n    }, wait);\r\n  };\r\n};\n"})}),"\n",(0,a.jsx)(r.p,{children:"\u5f53\u4f60\u8c03\u7528\u9632\u6296\u51fd\u6570\u8fd4\u56de\u7684\u51fd\u6570\u65f6\uff0cthis \u4f1a\u6307\u5411\u8c03\u7528\u5b83\u7684\u4e0a\u4e0b\u6587\u3002\u5982\u679c\u4f60\u5728\u67d0\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e2d\u4f7f\u7528\u9632\u6296\u51fd\u6570\uff0cthis \u4f1a\u6307\u5411\u8be5\u5bf9\u8c61\u3002"}),"\n",(0,a.jsx)(r.p,{children:"\u5982\u679c\u4f60\u5728\u9632\u6296\u51fd\u6570\u5185\u90e8\u4f7f\u7528\u4e86\u7bad\u5934\u51fd\u6570\uff08\u5982 setTimeout \u4e2d\uff09\uff0c\u7bad\u5934\u51fd\u6570\u4e0d\u4f1a\u6709\u81ea\u5df1\u7684 this\uff0c\u5b83\u4f1a\u4ece\u5916\u90e8\u4f5c\u7528\u57df\u7ee7\u627f this\u3002\u8fd9\u901a\u5e38\u662f\u6211\u4eec\u5e0c\u671b\u7684\u884c\u4e3a\uff0c\u4ee5\u4fdd\u6301\u4e0a\u4e0b\u6587\u3002"}),"\n",(0,a.jsx)(r.p,{children:"\u5728 React \u4e2d\u81ea\u5b9a\u4e49\u7684 useDebounce \u94a9\u5b50\u5b9e\u73b0\uff0c\u7528\u4e8e\u5904\u7406\u9632\u6296\u903b\u8f91"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'import { useState, useEffect } from "react";\r\n\r\nfunction useDebounce(value, delay) {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    // \u8bbe\u7f6e\u5b9a\u65f6\u5668\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    // \u6e05\u9664\u5b9a\u65f6\u5668\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n\r\nexport default useDebounce;\n'})}),"\n",(0,a.jsxs)(r.blockquote,{children:["\n",(0,a.jsx)(r.p,{children:"\u8e29\u5751\uff0c\u5728 react \u4e2d\u4f7f\u7528 lodash \u7684 debounce \u51fd\u6570\u4e0d\u751f\u6548"}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"\u539f\u56e0\u53ca\u89e3\u51b3\u529e\u6cd5\uff1a"}),"\n",(0,a.jsx)(r.p,{children:"\u7531\u4e8e debounce \u51fd\u6570\u5728\u6bcf\u6b21\u6e32\u67d3\u65f6\u90fd\u88ab\u91cd\u65b0\u521b\u5efa\uff0c\u5bfc\u81f4\u5b83\u4e0d\u6301\u4e45\u5316\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528 useCallback \u6765\u786e\u4fdd\u9632\u6296\u51fd\u6570\u5728\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u4e2d\u4fdd\u6301\u4e00\u81f4\u3002"}),"\n",(0,a.jsx)(r.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-jsx",children:'import React, { useCallback, useEffect } from "react";\r\nimport { debounce } from "lodash";\r\n\r\nconst DebouncedButton = () => {\r\n  const handleClick = (message) => {\r\n    console.log(message);\r\n  };\r\n\r\n  // \u4f7f\u7528 useCallback \u521b\u5efa\u9632\u6296\u51fd\u6570\r\n  const debouncedClick = useCallback(debounce(handleClick, 1000), []);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      debouncedClick.cancel(); // \u6e05\u7406\u9632\u6296\u51fd\u6570\r\n    };\r\n  }, [debouncedClick]);\r\n\r\n  return (\r\n    <button onClick={() => debouncedClick("Button clicked!")}>Click me</button>\r\n  );\r\n};\r\n\r\nexport default DebouncedButton;\n'})}),"\n",(0,a.jsx)(r.h4,{id:"\u8282\u6d41",children:"\u8282\u6d41"}),"\n",(0,a.jsx)(r.p,{children:"\u8282\u6d41\uff08Throttling\uff09\u662f\u4e00\u79cd\u63a7\u5236\u51fd\u6570\u6267\u884c\u9891\u7387\u7684\u6280\u672f\uff0c\u8282\u6d41\u4f1a\u5b9a\u671f\u6267\u884c\u51fd\u6570\uff0c\u65e8\u5728\u9650\u5236\u67d0\u4e2a\u51fd\u6570\u5728\u7279\u5b9a\u65f6\u95f4\u5185\u7684\u6267\u884c\u6b21\u6570\u3002"}),"\n",(0,a.jsx)(r.h4,{id:"\u539f\u7406\u53ca\u4f7f\u7528\u573a\u666f-1",children:"\u539f\u7406\u53ca\u4f7f\u7528\u573a\u666f"}),"\n",(0,a.jsx)(r.p,{children:"\u8282\u6d41\u4f1a\u5728\u8bbe\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u5185\uff0c\u53ea\u6267\u884c\u4e00\u6b21\u51fd\u6570\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8bbe\u5b9a\u4e3a\u6bcf 1000 \u6beb\u79d2\u6267\u884c\u4e00\u6b21\uff0c\u90a3\u4e48\u5728 1000 \u6beb\u79d2\u5185\uff0c\u5373\u4f7f\u4e8b\u4ef6\u88ab\u89e6\u53d1\u591a\u6b21\uff0c\u51fd\u6570\u4e5f\u53ea\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\u3002"}),"\n",(0,a.jsx)(r.p,{children:"\u4f7f\u7528\u573a\u666f\uff1a"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"\u5904\u7406\u6eda\u52a8\u4e8b\u4ef6\uff08\u5982\u65e0\u9650\u6eda\u52a8\u6216\u6eda\u52a8\u52a0\u8f7d\uff09\u3002"}),"\n",(0,a.jsx)(r.li,{children:"\u5904\u7406\u7a97\u53e3\u5927\u5c0f\u8c03\u6574\uff08resize\uff09\u3002"}),"\n",(0,a.jsx)(r.li,{children:"\u8282\u5236\u6309\u94ae\u70b9\u51fb\u3001API \u8bf7\u6c42\u7b49\u9ad8\u9891\u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"\u5b9e\u73b0\uff1a"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'function throttle(fn, limit) {\r\n  let lastCall = 0;\r\n  return function () {\r\n    const args = arguments;\r\n    const now = Date.now();\r\n    if (now - lastCall >= limit) {\r\n      lastCall = now;\r\n      fn.apply(this, args);\r\n    }\r\n  };\r\n}\r\n\r\nconst myEfficientFn = throttle(function () {\r\n  // \u9700\u8981\u8282\u6d41\u6267\u884c\u7684\u51fd\u6570\r\n  console.log("\u6267\u884c\u8282\u6d41\u51fd\u6570");\r\n}, 250);\r\n\r\nwindow.addEventListener("scroll", myEfficientFn);\n'})}),"\n",(0,a.jsx)(r.p,{children:"ts \u7248\u672c"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:"function throttle<T extends (...args: any[]) => void>(fn: T, limit: number) {\r\n    let lastCall: number | null = null;\r\n\r\n    return function (...args: Parameters<T>) {\r\n        const now = Date.now();\r\n        if (lastCall === null || now - (lastCall as number) >= limit) {\r\n            lastCall = now;\r\n            fn.apply(this, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport default throttle;\n"})}),"\n",(0,a.jsx)(r.p,{children:"useThrottle"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'import { useState, useEffect, useCallback } from "react";\r\n\r\nfunction useThrottle(value, delay) {\r\n  const [throttledValue, setThrottledValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setThrottledValue(value);\r\n    }, delay);\r\n\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return throttledValue;\r\n}\r\n\r\nexport default useThrottle;\n'})}),"\n",(0,a.jsx)(r.p,{children:"\u540c\u6837\u8282\u6d41\u51fd\u6570\u5728 React \u4e2d\u4e5f\u4f1a\u9762\u4e34\u6bcf\u6b21\u6e32\u67d3\u65f6\u88ab\u91cd\u65b0\u521b\u5efa\u7684\u95ee\u9898\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5176\u4e0d\u6301\u4e45\u5316\uff0c\u5f71\u54cd\u6027\u80fd\u548c\u9884\u671f\u884c\u4e3a\u3002"}),"\n",(0,a.jsx)(r.p,{children:"\u4f7f\u7528\u793a\u4f8b\uff1a"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'import React, { useCallback, useEffect } from "react";\r\nimport { throttle } from "lodash";\r\n\r\nconst ThrottledButton = () => {\r\n  const handleClick = (message) => {\r\n    console.log(message);\r\n  };\r\n\r\n  // \u4f7f\u7528 useCallback \u521b\u5efa\u8282\u6d41\u51fd\u6570\r\n  const throttledClick = useCallback(throttle(handleClick, 1000), []);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      throttledClick.cancel(); // \u6e05\u7406\u8282\u6d41\u51fd\u6570\r\n    };\r\n  }, [throttledClick]);\r\n\r\n  return (\r\n    <button onClick={() => throttledClick("Button clicked!")}>Click me</button>\r\n  );\r\n};\r\n\r\nexport default ThrottledButton;\n'})}),"\n",(0,a.jsx)(r.h3,{id:"3\u6df1\u6d45\u62f7\u8d1d",children:"3.\u6df1\u6d45\u62f7\u8d1d"}),"\n",(0,a.jsx)(r.h4,{id:"\u6d45\u62f7\u8d1d",children:"\u6d45\u62f7\u8d1d"}),"\n",(0,a.jsx)(r.p,{children:"\u6d45\u62f7\u8d1d\u53ef\u4ee5\u901a\u8fc7\u6269\u5c55\u8fd0\u7b97\u7b26\uff08...\uff09\u6216\u8005 Object.assign()\u65b9\u6cd5\u6765\u5b9e\u73b0"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'const obj = { a: 1 };\r\nfunction shallowCopy(obj) {\r\n  if (typeof obj !== "object" || obj === null) {\r\n    return obj;\r\n  }\r\n  return Object.assign({}, obj);\r\n}\r\nconst shallowCopeObj = { ...Obj };\n'})}),"\n",(0,a.jsx)(r.h4,{id:"\u6df1\u62f7\u8d1d",children:"\u6df1\u62f7\u8d1d"}),"\n",(0,a.jsx)(r.p,{children:"\u6df1\u62f7\u8d1d\uff1a\u5c06\u4e00\u4e2a\u5bf9\u8c61\u4ece\u5185\u5b58\u4e2d\u5b8c\u6574\u7684\u62f7\u8d1d\u4e00\u4efd\u51fa\u6765,\u4ece\u5806\u5185\u5b58\u4e2d\u5f00\u8f9f\u4e00\u4e2a\u65b0\u7684\u533a\u57df\u5b58\u653e\u65b0\u5bf9\u8c61,\u4e14\u4fee\u6539\u65b0\u5bf9\u8c61\u4e0d\u4f1a\u5f71\u54cd\u539f\u5bf9\u8c61"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:'const mapTag = "[object Map]";\r\nconst setTag = "[object Set]";\r\nconst arrayTag = "[object Array]";\r\nconst objectTag = "[object Object]";\r\nconst argsTag = "[object Arguments]";\r\n\r\nconst boolTag = "[object Boolean]";\r\nconst dateTag = "[object Date]";\r\nconst numberTag = "[object Number]";\r\nconst stringTag = "[object String]";\r\nconst symbolTag = "[object Symbol]";\r\nconst errorTag = "[object Error]";\r\nconst regexpTag = "[object RegExp]";\r\nconst funcTag = "[object Function]";\r\n\r\nconst deepTag = [mapTag, setTag, arrayTag, objectTag, argsTag];\r\n\r\nfunction isObject(target) {\r\n  const type = typeof target;\r\n  return target !== null && (type === "object" || type === "function");\r\n}\r\n\r\nfunction getType(target) {\r\n  return Object.prototype.toString.call(target);\r\n}\r\n\r\nfunction getInit(target) {\r\n  const Ctor = target.constructor;\r\n  return new Ctor();\r\n}\r\n\r\nfunction cloneSymbol(targe) {\r\n  return Object(Symbol.prototype.valueOf.call(targe));\r\n}\r\n\r\nfunction cloneReg(targe) {\r\n  const reFlags = /\\w*$/;\r\n  const result = new targe.constructor(targe.source, reFlags.exec(targe));\r\n  result.lastIndex = targe.lastIndex;\r\n  return result;\r\n}\r\n\r\nfunction cloneFunction(func) {\r\n  const bodyReg = /(?<={)(.|\\n)+(?=})/m;\r\n  const paramReg = /(?<=\\().+(?=\\)\\s+{)/;\r\n  const funcString = func.toString();\r\n  if (func.prototype) {\r\n    const param = paramReg.exec(funcString);\r\n    const body = bodyReg.exec(funcString);\r\n    if (body) {\r\n      if (param) {\r\n        const paramArr = param[0].split(",");\r\n        return new Function(...paramArr, body[0]);\r\n      } else {\r\n        return new Function(body[0]);\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  } else {\r\n    return eval(funcString);\r\n  }\r\n}\r\n\r\nfunction cloneOtherType(targe, type) {\r\n  const Ctor = targe.constructor;\r\n  switch (type) {\r\n    case boolTag:\r\n    case numberTag:\r\n    case stringTag:\r\n    case errorTag:\r\n    case dateTag:\r\n      return new Ctor(targe);\r\n    case regexpTag:\r\n      return cloneReg(targe);\r\n    case symbolTag:\r\n      return cloneSymbol(targe);\r\n    case funcTag:\r\n      return cloneFunction(targe);\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction deepCopy(target, hash = new WeakMap()) {\r\n  // \u514b\u9686\u539f\u59cb\u7c7b\u578b\r\n  if (!isObject(target)) {\r\n    return target;\r\n  }\r\n\r\n  // \u521d\u59cb\u5316\r\n  const type = getType(target);\r\n  let cloneTarget;\r\n  if (deepTag.includes(type)) {\r\n    cloneTarget = getInit(target, type);\r\n  } else {\r\n    return cloneOtherType(target, type);\r\n  }\r\n\r\n  // \u9632\u6b62\u5faa\u73af\u5f15\u7528\r\n  if (map.get(target)) {\r\n    return target;\r\n  }\r\n  map.set(target, cloneTarget);\r\n\r\n  // \u514b\u9686 set\r\n  if (type === setTag) {\r\n    target.forEach((value) => {\r\n      cloneTarget.add(deepClone(value));\r\n    });\r\n    return cloneTarget;\r\n  }\r\n\r\n  // \u514b\u9686map\r\n  if (type === mapTag) {\r\n    target.forEach((value, key) => {\r\n      cloneTarget.set(key, deepClone(value));\r\n    });\r\n    return cloneTarget;\r\n  }\r\n\r\n  // \u514b\u9686\u5bf9\u8c61\u548c\u6570\u7ec4\r\n  if (type === objectTag) {\r\n    const cloneTarget = {};\r\n    const keys = Object.keys(target);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      const key = keys[i];\r\n      cloneTarget[i] = deepClone(target[key], map);\r\n    }\r\n    return cloneTarget;\r\n  }\r\n\r\n  // \u514b\u9686\u6570\u7ec4\r\n  if (type === arrayTag) {\r\n    const cloneTarget = [];\r\n    for (let i = 0; i < target.length; i++) {\r\n      cloneTarget[i] = deepClone(target[i], map);\r\n    }\r\n    return cloneTarget;\r\n  }\r\n}\n'})})]})}function d(n={}){const{wrapper:r}={...(0,l.R)(),...n.components};return r?(0,a.jsx)(r,{...n,children:(0,a.jsx)(u,{...n})}):u(n)}},8453:(n,r,e)=>{e.d(r,{R:()=>c,x:()=>o});var t=e(6540);const a={},l=t.createContext(a);function c(n){const r=t.useContext(l);return t.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function o(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:c(n.components),t.createElement(l.Provider,{value:r},n.children)}}}]);