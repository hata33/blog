"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6113],{3486:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"\u8ba1\u7b97\u673a\u7f51\u7edc/\u4ece\u8f93\u5165URL\u5230\u9875\u9762\u6e32\u67d3","title":"\u4ece\u8f93\u5165 URL \u5230\u9875\u9762\u6e32\u67d3\u7684\u5168\u8fc7\u7a0b","description":"1. URL \u89e3\u6790\u9636\u6bb5","source":"@site/docs/80-\u8ba1\u7b97\u673a\u7f51\u7edc/06-\u4ece\u8f93\u5165URL\u5230\u9875\u9762\u6e32\u67d3.md","sourceDirName":"80-\u8ba1\u7b97\u673a\u7f51\u7edc","slug":"/\u8ba1\u7b97\u673a\u7f51\u7edc/\u4ece\u8f93\u5165URL\u5230\u9875\u9762\u6e32\u67d3","permalink":"/blog/docs/\u8ba1\u7b97\u673a\u7f51\u7edc/\u4ece\u8f93\u5165URL\u5230\u9875\u9762\u6e32\u67d3","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"\u7f51\u7edc\u7f16\u7a0b","permalink":"/blog/docs/\u8ba1\u7b97\u673a\u7f51\u7edc/\u7f51\u7edc\u7f16\u7a0b"},"next":{"title":"Vue \u54cd\u5e94\u5f0f\u539f\u7406","permalink":"/blog/docs/Vue/\u54cd\u5e94\u5f0f\u539f\u7406"}}');var t=s(4848),i=s(8453);const l={},a="\u4ece\u8f93\u5165 URL \u5230\u9875\u9762\u6e32\u67d3\u7684\u5168\u8fc7\u7a0b",c={},o=[{value:"1. URL \u89e3\u6790\u9636\u6bb5",id:"1-url-\u89e3\u6790\u9636\u6bb5",level:2},{value:"1.1 URL \u89e3\u6790",id:"11-url-\u89e3\u6790",level:3},{value:"1.2 HSTS \u68c0\u67e5",id:"12-hsts-\u68c0\u67e5",level:3},{value:"2. DNS \u89e3\u6790\u9636\u6bb5",id:"2-dns-\u89e3\u6790\u9636\u6bb5",level:2},{value:"2.1 DNS \u9884\u89e3\u6790",id:"21-dns-\u9884\u89e3\u6790",level:3},{value:"2.2 DNS \u7f13\u5b58\u4f18\u5316",id:"22-dns-\u7f13\u5b58\u4f18\u5316",level:3},{value:"3. TCP \u8fde\u63a5\u9636\u6bb5",id:"3-tcp-\u8fde\u63a5\u9636\u6bb5",level:2},{value:"3.1 Connection \u590d\u7528",id:"31-connection-\u590d\u7528",level:3},{value:"3.2 \u5e76\u53d1\u8fde\u63a5\u63a7\u5236",id:"32-\u5e76\u53d1\u8fde\u63a5\u63a7\u5236",level:3},{value:"4. \u53d1\u9001 HTTP \u8bf7\u6c42",id:"4-\u53d1\u9001-http-\u8bf7\u6c42",level:2},{value:"4.1 \u8bf7\u6c42\u4f18\u5316",id:"41-\u8bf7\u6c42\u4f18\u5316",level:3},{value:"4.2 HTTP \u7f13\u5b58\u7b56\u7565",id:"42-http-\u7f13\u5b58\u7b56\u7565",level:3},{value:"5. \u63a5\u6536\u54cd\u5e94\u6570\u636e",id:"5-\u63a5\u6536\u54cd\u5e94\u6570\u636e",level:2},{value:"5.1 \u6570\u636e\u538b\u7f29",id:"51-\u6570\u636e\u538b\u7f29",level:3},{value:"5.2 \u54cd\u5e94\u6570\u636e\u5904\u7406",id:"52-\u54cd\u5e94\u6570\u636e\u5904\u7406",level:3},{value:"6. \u9875\u9762\u89e3\u6790\u548c\u6e32\u67d3",id:"6-\u9875\u9762\u89e3\u6790\u548c\u6e32\u67d3",level:2},{value:"6.1 \u8d44\u6e90\u9884\u52a0\u8f7d",id:"61-\u8d44\u6e90\u9884\u52a0\u8f7d",level:3},{value:"6.2 CSS \u4f18\u5316",id:"62-css-\u4f18\u5316",level:3},{value:"6.3 JavaScript \u4f18\u5316",id:"63-javascript-\u4f18\u5316",level:3},{value:"6.4 \u56fe\u7247\u4f18\u5316",id:"64-\u56fe\u7247\u4f18\u5316",level:3},{value:"7. \u9875\u9762\u4ea4\u4e92\u4f18\u5316",id:"7-\u9875\u9762\u4ea4\u4e92\u4f18\u5316",level:2},{value:"7.1 \u6027\u80fd\u76d1\u63a7",id:"71-\u6027\u80fd\u76d1\u63a7",level:3},{value:"7.2 \u6e32\u67d3\u4f18\u5316",id:"72-\u6e32\u67d3\u4f18\u5316",level:3},{value:"7.3 \u79bb\u7ebf\u7f13\u5b58",id:"73-\u79bb\u7ebf\u7f13\u5b58",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u4ece\u8f93\u5165-url-\u5230\u9875\u9762\u6e32\u67d3\u7684\u5168\u8fc7\u7a0b",children:"\u4ece\u8f93\u5165 URL \u5230\u9875\u9762\u6e32\u67d3\u7684\u5168\u8fc7\u7a0b"})}),"\n",(0,t.jsx)(n.h2,{id:"1-url-\u89e3\u6790\u9636\u6bb5",children:"1. URL \u89e3\u6790\u9636\u6bb5"}),"\n",(0,t.jsx)(n.h3,{id:"11-url-\u89e3\u6790",children:"1.1 URL \u89e3\u6790"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const url = new URL('https://example.com/path?query=123');\nconsole.log(url.protocol); // https:\nconsole.log(url.hostname); // example.com\nconsole.log(url.pathname); // /path\nconsole.log(url.search);   // ?query=123\n"})}),"\n",(0,t.jsx)(n.h3,{id:"12-hsts-\u68c0\u67e5",children:"1.2 HSTS \u68c0\u67e5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u670d\u52a1\u7aef\u8bbe\u7f6e HSTS\nresponse.setHeader(\n  'Strict-Transport-Security',\n  'max-age=31536000; includeSubDomains'\n);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"2-dns-\u89e3\u6790\u9636\u6bb5",children:"2. DNS \u89e3\u6790\u9636\u6bb5"}),"\n",(0,t.jsx)(n.h3,{id:"21-dns-\u9884\u89e3\u6790",children:"2.1 DNS \u9884\u89e3\u6790"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'\x3c!-- DNS \u9884\u89e3\u6790 --\x3e\n<link rel="dns-prefetch" href="//example.com">\n\n\x3c!-- \u9884\u8fde\u63a5 --\x3e\n<link rel="preconnect" href="https://example.com">\n'})}),"\n",(0,t.jsx)(n.h3,{id:"22-dns-\u7f13\u5b58\u4f18\u5316",children:"2.2 DNS \u7f13\u5b58\u4f18\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u81ea\u5b9a\u4e49 DNS \u7f13\u5b58\nconst dnsCacheMap = new Map();\n\nasync function resolveWithCache(domain) {\n  if (dnsCacheMap.has(domain)) {\n    return dnsCacheMap.get(domain);\n  }\n  const ip = await dns.resolve(domain);\n  dnsCacheMap.set(domain, ip);\n  return ip;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"3-tcp-\u8fde\u63a5\u9636\u6bb5",children:"3. TCP \u8fde\u63a5\u9636\u6bb5"}),"\n",(0,t.jsx)(n.h3,{id:"31-connection-\u590d\u7528",children:"3.1 Connection \u590d\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u8bbe\u7f6e keep-alive\nfetch(url, {\n  headers: {\n    'Connection': 'keep-alive'\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"32-\u5e76\u53d1\u8fde\u63a5\u63a7\u5236",children:"3.2 \u5e76\u53d1\u8fde\u63a5\u63a7\u5236"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u9650\u5236\u5e76\u53d1\u8bf7\u6c42\u6570\nclass RequestQueue {\n  constructor(maxConcurrent = 6) {\n    this.maxConcurrent = maxConcurrent;\n    this.queue = [];\n    this.running = 0;\n  }\n\n  async add(request) {\n    if (this.running >= this.maxConcurrent) {\n      await new Promise(resolve => this.queue.push(resolve));\n    }\n    \n    this.running++;\n    try {\n      return await request();\n    } finally {\n      this.running--;\n      if (this.queue.length > 0) {\n        this.queue.shift()();\n      }\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"4-\u53d1\u9001-http-\u8bf7\u6c42",children:"4. \u53d1\u9001 HTTP \u8bf7\u6c42"}),"\n",(0,t.jsx)(n.h3,{id:"41-\u8bf7\u6c42\u4f18\u5316",children:"4.1 \u8bf7\u6c42\u4f18\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u8bf7\u6c42\u5408\u5e76\nasync function batchRequest(urls) {\n  const requests = urls.map(url => fetch(url));\n  return Promise.all(requests);\n}\n\n// \u8bf7\u6c42\u7f13\u5b58\nconst cache = new Map();\nasync function cachedFetch(url) {\n  if (cache.has(url)) {\n    return cache.get(url);\n  }\n  const response = await fetch(url);\n  const data = await response.json();\n  cache.set(url, data);\n  return data;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"42-http-\u7f13\u5b58\u7b56\u7565",children:"4.2 HTTP \u7f13\u5b58\u7b56\u7565"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u670d\u52a1\u7aef\u7f13\u5b58\u63a7\u5236\nresponse.setHeader('Cache-Control', 'max-age=3600');\nresponse.setHeader('ETag', '\"33a64df551425fcc55e4d42a148795d9f25f89d4\"');\n\n// \u5ba2\u6237\u7aef\u7f13\u5b58\u9a8c\u8bc1\nfetch(url, {\n  headers: {\n    'If-None-Match': '\"33a64df551425fcc55e4d42a148795d9f25f89d4\"'\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"5-\u63a5\u6536\u54cd\u5e94\u6570\u636e",children:"5. \u63a5\u6536\u54cd\u5e94\u6570\u636e"}),"\n",(0,t.jsx)(n.h3,{id:"51-\u6570\u636e\u538b\u7f29",children:"5.1 \u6570\u636e\u538b\u7f29"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u670d\u52a1\u7aef Gzip \u538b\u7f29\nconst compression = require('compression');\napp.use(compression());\n\n// \u5ba2\u6237\u7aef\u8bf7\u6c42\u538b\u7f29\u6570\u636e\nfetch(url, {\n  headers: {\n    'Accept-Encoding': 'gzip, deflate, br'\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"52-\u54cd\u5e94\u6570\u636e\u5904\u7406",children:"5.2 \u54cd\u5e94\u6570\u636e\u5904\u7406"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u6d41\u5f0f\u5904\u7406\u5927\u6570\u636e\nasync function streamProcess(response) {\n  const reader = response.body.getReader();\n  const decoder = new TextDecoder();\n  \n  while (true) {\n    const {done, value} = await reader.read();\n    if (done) break;\n    \n    const chunk = decoder.decode(value);\n    processChunk(chunk);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"6-\u9875\u9762\u89e3\u6790\u548c\u6e32\u67d3",children:"6. \u9875\u9762\u89e3\u6790\u548c\u6e32\u67d3"}),"\n",(0,t.jsx)(n.h3,{id:"61-\u8d44\u6e90\u9884\u52a0\u8f7d",children:"6.1 \u8d44\u6e90\u9884\u52a0\u8f7d"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'\x3c!-- \u9884\u52a0\u8f7d\u5173\u952e\u8d44\u6e90 --\x3e\n<link rel="preload" href="style.css" as="style">\n<link rel="preload" href="main.js" as="script">\n<link rel="preload" href="hero.jpg" as="image">\n\n\x3c!-- \u9884\u52a0\u8f7d\u5b57\u4f53 --\x3e\n<link rel="preload" href="font.woff2" as="font" crossorigin>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"62-css-\u4f18\u5316",children:"6.2 CSS \u4f18\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'\x3c!-- \u5173\u952e CSS \u5185\u8054 --\x3e\n<style>\n  /* \u9996\u5c4f\u5173\u952e\u6837\u5f0f */\n  .header { ... }\n  .hero { ... }\n</style>\n\n\x3c!-- \u5f02\u6b65\u52a0\u8f7d\u975e\u5173\u952e CSS --\x3e\n<link rel="preload" href="non-critical.css" as="style" onload="this.rel=\'stylesheet\'">\n'})}),"\n",(0,t.jsx)(n.h3,{id:"63-javascript-\u4f18\u5316",children:"6.3 JavaScript \u4f18\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'\x3c!-- \u5f02\u6b65\u52a0\u8f7d JS --\x3e\n<script async src="analytics.js"><\/script>\n<script defer src="non-critical.js"><\/script>\n\n\x3c!-- \u4ee3\u7801\u5206\u5272 --\x3e\n<script type="module">\n  import(\'./feature.js\').then(module => {\n    module.init();\n  });\n<\/script>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"64-\u56fe\u7247\u4f18\u5316",children:"6.4 \u56fe\u7247\u4f18\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'\x3c!-- \u54cd\u5e94\u5f0f\u56fe\u7247 --\x3e\n<picture>\n  <source media="(min-width: 800px)" srcset="large.jpg">\n  <source media="(min-width: 400px)" srcset="medium.jpg">\n  <img src="small.jpg" alt="responsive image">\n</picture>\n\n\x3c!-- \u61d2\u52a0\u8f7d --\x3e\n<img loading="lazy" src="image.jpg" alt="lazy load">\n'})}),"\n",(0,t.jsx)(n.h2,{id:"7-\u9875\u9762\u4ea4\u4e92\u4f18\u5316",children:"7. \u9875\u9762\u4ea4\u4e92\u4f18\u5316"}),"\n",(0,t.jsx)(n.h3,{id:"71-\u6027\u80fd\u76d1\u63a7",children:"7.1 \u6027\u80fd\u76d1\u63a7"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u6027\u80fd\u6307\u6807\u76d1\u63a7\nconst observer = new PerformanceObserver((list) => {\n  for (const entry of list.getEntries()) {\n    if (entry.entryType === 'largest-contentful-paint') {\n      console.log('LCP:', entry.startTime);\n    }\n  }\n});\n\nobserver.observe({ entryTypes: ['largest-contentful-paint'] });\n"})}),"\n",(0,t.jsx)(n.h3,{id:"72-\u6e32\u67d3\u4f18\u5316",children:"7.2 \u6e32\u67d3\u4f18\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u9632\u6296\nfunction debounce(fn, delay) {\n  let timer = null;\n  return function(...args) {\n    clearTimeout(timer);\n    timer = setTimeout(() => fn.apply(this, args), delay);\n  };\n}\n\n// \u8282\u6d41\nfunction throttle(fn, delay) {\n  let last = 0;\n  return function(...args) {\n    const now = Date.now();\n    if (now - last > delay) {\n      fn.apply(this, args);\n      last = now;\n    }\n  };\n}\n\n// \u865a\u62df\u5217\u8868\nclass VirtualList {\n  constructor(container, items, itemHeight) {\n    this.container = container;\n    this.items = items;\n    this.itemHeight = itemHeight;\n    this.visibleCount = Math.ceil(container.clientHeight / itemHeight);\n    this.startIndex = 0;\n    this.endIndex = this.startIndex + this.visibleCount;\n    \n    this.container.addEventListener('scroll', this.onScroll.bind(this));\n    this.render();\n  }\n  \n  onScroll() {\n    this.startIndex = Math.floor(this.container.scrollTop / this.itemHeight);\n    this.endIndex = this.startIndex + this.visibleCount;\n    this.render();\n  }\n  \n  render() {\n    const visibleItems = this.items.slice(this.startIndex, this.endIndex);\n    // \u6e32\u67d3\u53ef\u89c1\u9879\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"73-\u79bb\u7ebf\u7f13\u5b58",children:"7.3 \u79bb\u7ebf\u7f13\u5b58"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Service Worker \u6ce8\u518c\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js')\n    .then(registration => {\n      console.log('SW registered:', registration);\n    })\n    .catch(error => {\n      console.log('SW registration failed:', error);\n    });\n}\n\n// Service Worker \u7f13\u5b58\u7b56\u7565\nself.addEventListener('fetch', event => {\n  event.respondWith(\n    caches.match(event.request)\n      .then(response => response || fetch(event.request))\n  );\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var r=s(6540);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);