"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[240],{7849:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"react/\u72b6\u6001\u7ba1\u7406","title":"React \u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4","description":"1. useContext + useReducer","source":"@site/docs/80-react/85-\u72b6\u6001\u7ba1\u7406.md","sourceDirName":"80-react","slug":"/react/\u72b6\u6001\u7ba1\u7406","permalink":"/blog/docs/react/\u72b6\u6001\u7ba1\u7406","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":85,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"React Router \u8be6\u89e3","permalink":"/blog/docs/react/router"},"next":{"title":"\u8ba1\u7b97\u673a\u7f51\u7edc\u57fa\u7840","permalink":"/blog/docs/\u8ba1\u7b97\u673a\u7f51\u7edc/\u57fa\u7840\u6982\u5ff5"}}');var s=t(4848),i=t(8453);const l={},c="React \u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4",d={},a=[{value:"1. useContext + useReducer",id:"1-usecontext--usereducer",level:2},{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528",level:3},{value:"\u4f18\u70b9",id:"\u4f18\u70b9",level:3},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9",level:3},{value:"2. Redux",id:"2-redux",level:2},{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528-1",level:3},{value:"\u4f18\u70b9",id:"\u4f18\u70b9-1",level:3},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9-1",level:3},{value:"3. Zustand",id:"3-zustand",level:2},{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528-2",level:3},{value:"\u4f18\u70b9",id:"\u4f18\u70b9-2",level:3},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9-2",level:3},{value:"\u5bf9\u6bd4\u603b\u7ed3",id:"\u5bf9\u6bd4\u603b\u7ed3",level:2},{value:"\u9002\u7528\u573a\u666f",id:"\u9002\u7528\u573a\u666f",level:3},{value:"\u6027\u80fd\u5bf9\u6bd4",id:"\u6027\u80fd\u5bf9\u6bd4",level:3},{value:"\u5f00\u53d1\u4f53\u9a8c",id:"\u5f00\u53d1\u4f53\u9a8c",level:3},{value:"\u5b9e\u9645\u573a\u666f\u5bf9\u6bd4",id:"\u5b9e\u9645\u573a\u666f\u5bf9\u6bd4",level:2},{value:"1. \u5f02\u6b65\u6570\u636e\u83b7\u53d6",id:"1-\u5f02\u6b65\u6570\u636e\u83b7\u53d6",level:3},{value:"2. \u8868\u5355\u72b6\u6001\u7ba1\u7406",id:"2-\u8868\u5355\u72b6\u6001\u7ba1\u7406",level:3},{value:"\u6027\u80fd\u5bf9\u6bd4\u5206\u6790",id:"\u6027\u80fd\u5bf9\u6bd4\u5206\u6790",level:3}];function o(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"react-\u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4",children:"React \u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4"})}),"\n",(0,s.jsx)(e.h2,{id:"1-usecontext--usereducer",children:"1. useContext + useReducer"}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u672c\u4f7f\u7528",children:"\u57fa\u672c\u4f7f\u7528"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"// \u521b\u5efa Context\nconst CounterContext = createContext<{\n  count: number;\n  dispatch: React.Dispatch<any>;\n} | null>(null);\n\n// \u5b9a\u4e49 reducer\nfunction counterReducer(state: { count: number }, action: { type: string }) {\n  switch (action.type) {\n    case 'increment':\n      return { count: state.count + 1 };\n    case 'decrement':\n      return { count: state.count - 1 };\n    default:\n      return state;\n  }\n}\n\n// Provider \u7ec4\u4ef6\nfunction CounterProvider({ children }: { children: React.ReactNode }) {\n  const [state, dispatch] = useReducer(counterReducer, { count: 0 });\n  \n  return (\n    <CounterContext.Provider value={{ count: state.count, dispatch }}>\n      {children}\n    </CounterContext.Provider>\n  );\n}\n\n// \u4f7f\u7528\u72b6\u6001\nfunction Counter() {\n  const counter = useContext(CounterContext);\n  if (!counter) throw new Error('Counter must be used within CounterProvider');\n  \n  return (\n    <div>\n      Count: {counter.count}\n      <button onClick={() => counter.dispatch({ type: 'increment' })}>+</button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u4f18\u70b9",children:"\u4f18\u70b9"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"React \u539f\u751f\u652f\u6301\uff0c\u65e0\u9700\u989d\u5916\u4f9d\u8d56"}),"\n",(0,s.jsx)(e.li,{children:"\u9002\u5408\u5c0f\u578b\u5e94\u7528\u6216\u7ec4\u4ef6\u6811\u5c40\u90e8\u72b6\u6001\u7ba1\u7406"}),"\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528\u7b80\u5355\uff0c\u4e0a\u624b\u5bb9\u6613"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0e React \u7ed3\u5408\u7d27\u5bc6"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u7f3a\u70b9",children:"\u7f3a\u70b9"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u53ef\u80fd\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u91cd\u6e32\u67d3"}),"\n",(0,s.jsx)(e.li,{children:"\u72b6\u6001\u66f4\u65b0\u53ef\u80fd\u5bfc\u81f4\u6574\u4e2a\u5b50\u6811\u91cd\u65b0\u6e32\u67d3"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u9002\u5408\u5927\u578b\u5e94\u7528\u6216\u590d\u6742\u72b6\u6001\u7ba1\u7406"}),"\n",(0,s.jsx)(e.li,{children:"\u7f3a\u4e4f\u5f00\u53d1\u8005\u5de5\u5177\u652f\u6301"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"2-redux",children:"2. Redux"}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u672c\u4f7f\u7528-1",children:"\u57fa\u672c\u4f7f\u7528"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"// \u521b\u5efa slice\nimport { createSlice, configureStore } from '@reduxjs/toolkit';\n\nconst counterSlice = createSlice({\n  name: 'counter',\n  initialState: { value: 0 },\n  reducers: {\n    increment: state => {\n      state.value += 1;\n    },\n    decrement: state => {\n      state.value -= 1;\n    }\n  }\n});\n\n// \u521b\u5efa store\nconst store = configureStore({\n  reducer: {\n    counter: counterSlice.reducer\n  }\n});\n\n// \u4f7f\u7528\u72b6\u6001\nfunction Counter() {\n  const count = useSelector(state => state.counter.value);\n  const dispatch = useDispatch();\n  \n  return (\n    <div>\n      Count: {count}\n      <button onClick={() => dispatch(counterSlice.actions.increment())}>+</button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u4f18\u70b9-1",children:"\u4f18\u70b9"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b8c\u5584\u7684\u751f\u6001\u7cfb\u7edf\u548c\u5de5\u5177\u652f\u6301"}),"\n",(0,s.jsx)(e.li,{children:"\u5f3a\u5927\u7684\u4e2d\u95f4\u4ef6\u7cfb\u7edf"}),"\n",(0,s.jsx)(e.li,{children:"\u4e25\u683c\u7684\u5355\u5411\u6570\u636e\u6d41"}),"\n",(0,s.jsx)(e.li,{children:"\u9002\u5408\u5927\u578b\u5e94\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u4f18\u79c0\u7684\u5f00\u53d1\u8005\u5de5\u5177"}),"\n",(0,s.jsx)(e.li,{children:"\u53ef\u9884\u6d4b\u7684\u72b6\u6001\u66f4\u65b0"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u7f3a\u70b9-1",children:"\u7f3a\u70b9"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u914d\u7f6e\u76f8\u5bf9\u590d\u6742"}),"\n",(0,s.jsx)(e.li,{children:"\u6a21\u677f\u4ee3\u7801\u8f83\u591a"}),"\n",(0,s.jsx)(e.li,{children:"\u5b66\u4e60\u66f2\u7ebf\u9661\u5ced"}),"\n",(0,s.jsx)(e.li,{children:"\u5c0f\u578b\u5e94\u7528\u53ef\u80fd\u8fc7\u4e8e\u91cd\u91cf\u7ea7"}),"\n",(0,s.jsx)(e.li,{children:"\u72b6\u6001\u66f4\u65b0\u9700\u8981\u9075\u5faa\u4e0d\u53ef\u53d8\u6027"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"3-zustand",children:"3. Zustand"}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u672c\u4f7f\u7528-2",children:"\u57fa\u672c\u4f7f\u7528"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"import create from 'zustand';\n\ninterface CounterState {\n  count: number;\n  increment: () => void;\n  decrement: () => void;\n}\n\nconst useStore = create<CounterState>((set) => ({\n  count: 0,\n  increment: () => set(state => ({ count: state.count + 1 })),\n  decrement: () => set(state => ({ count: state.count - 1 }))\n}));\n\nfunction Counter() {\n  const { count, increment } = useStore();\n  \n  return (\n    <div>\n      Count: {count}\n      <button onClick={increment}>+</button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u4f18\u70b9-2",children:"\u4f18\u70b9"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"API \u7b80\u5355\u76f4\u89c2"}),"\n",(0,s.jsx)(e.li,{children:"\u4f53\u79ef\u5c0f\u5de7"}),"\n",(0,s.jsx)(e.li,{children:"\u652f\u6301 React \u4e4b\u5916\u7684\u573a\u666f"}),"\n",(0,s.jsx)(e.li,{children:"\u826f\u597d\u7684 TypeScript \u652f\u6301"}),"\n",(0,s.jsx)(e.li,{children:"\u65e0\u9700 Provider \u5305\u88f9"}),"\n",(0,s.jsx)(e.li,{children:"\u81ea\u52a8\u5904\u7406\u72b6\u6001\u66f4\u65b0\u4f18\u5316"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u7f3a\u70b9-2",children:"\u7f3a\u70b9"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u751f\u6001\u7cfb\u7edf\u76f8\u5bf9\u8f83\u5c0f"}),"\n",(0,s.jsx)(e.li,{children:"\u5f00\u53d1\u8005\u5de5\u5177\u652f\u6301\u6709\u9650"}),"\n",(0,s.jsx)(e.li,{children:"\u5927\u578b\u5e94\u7528\u53ef\u80fd\u9700\u8981\u989d\u5916\u7684\u72b6\u6001\u7ec4\u7ec7\u65b9\u6848"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5bf9\u6bd4\u603b\u7ed3",children:"\u5bf9\u6bd4\u603b\u7ed3"}),"\n",(0,s.jsx)(e.h3,{id:"\u9002\u7528\u573a\u666f",children:"\u9002\u7528\u573a\u666f"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"useContext + useReducer"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5c0f\u578b\u5e94\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u7ec4\u4ef6\u6811\u5c40\u90e8\u72b6\u6001\u7ba1\u7406"}),"\n",(0,s.jsx)(e.li,{children:"\u7b80\u5355\u7684\u72b6\u6001\u903b\u8f91"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u4e0e React \u7d27\u5bc6\u96c6\u6210"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Redux"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5927\u578b\u5e94\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u590d\u6742\u7684\u72b6\u6001\u903b\u8f91"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u5f3a\u5927\u7684\u5f00\u53d1\u8005\u5de5\u5177"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u4e25\u683c\u7684\u72b6\u6001\u7ba1\u7406\u89c4\u8303"}),"\n",(0,s.jsx)(e.li,{children:"\u56e2\u961f\u534f\u4f5c\u9879\u76ee"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Zustand"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e2d\u5c0f\u578b\u5e94\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u7b80\u5355\u4f46\u5f3a\u5927\u7684\u72b6\u6001\u7ba1\u7406"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u826f\u597d\u7684\u6027\u80fd"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u60f3\u914d\u7f6e\u592a\u591a\u6a21\u677f\u4ee3\u7801"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u6027\u80fd\u5bf9\u6bd4",children:"\u6027\u80fd\u5bf9\u6bd4"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"useContext + useReducer"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u53ef\u80fd\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u91cd\u6e32\u67d3"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u624b\u52a8\u4f18\u5316\u6027\u80fd"}),"\n",(0,s.jsx)(e.li,{children:"\u9002\u5408\u5c0f\u89c4\u6a21\u72b6\u6001\u66f4\u65b0"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Redux"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5185\u7f6e\u6027\u80fd\u4f18\u5316"}),"\n",(0,s.jsx)(e.li,{children:"\u9009\u62e9\u5668\u673a\u5236\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u91cd\u6e32\u67d3"}),"\n",(0,s.jsx)(e.li,{children:"\u5927\u89c4\u6a21\u72b6\u6001\u66f4\u65b0\u6027\u80fd\u597d"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Zustand"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u81ea\u52a8\u6279\u91cf\u66f4\u65b0"}),"\n",(0,s.jsx)(e.li,{children:"\u5185\u7f6e\u6027\u80fd\u4f18\u5316"}),"\n",(0,s.jsx)(e.li,{children:"\u9002\u5408\u9891\u7e41\u7684\u72b6\u6001\u66f4\u65b0"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u5f00\u53d1\u4f53\u9a8c",children:"\u5f00\u53d1\u4f53\u9a8c"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"useContext + useReducer"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b66\u4e60\u6210\u672c\u4f4e"}),"\n",(0,s.jsx)(e.li,{children:"\u4ee3\u7801\u91cf\u5c11"}),"\n",(0,s.jsx)(e.li,{children:"\u8c03\u8bd5\u76f8\u5bf9\u56f0\u96be"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Redux"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b8c\u5584\u7684\u5f00\u53d1\u8005\u5de5\u5177"}),"\n",(0,s.jsx)(e.li,{children:"\u6e05\u6670\u7684\u72b6\u6001\u8ffd\u8e2a"}),"\n",(0,s.jsx)(e.li,{children:"\u4ee3\u7801\u7ec4\u7ec7\u89c4\u8303"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Zustand"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7b80\u5355\u76f4\u89c2"}),"\n",(0,s.jsx)(e.li,{children:"\u914d\u7f6e\u5c11"}),"\n",(0,s.jsx)(e.li,{children:"\u5feb\u901f\u4e0a\u624b"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5b9e\u9645\u573a\u666f\u5bf9\u6bd4",children:"\u5b9e\u9645\u573a\u666f\u5bf9\u6bd4"}),"\n",(0,s.jsx)(e.h3,{id:"1-\u5f02\u6b65\u6570\u636e\u83b7\u53d6",children:"1. \u5f02\u6b65\u6570\u636e\u83b7\u53d6"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"useContext + useReducer:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"// \u5b9a\u4e49 actions \u548c reducer\ntype State = { data: any[]; loading: boolean; error: string | null };\ntype Action = \n  | { type: 'FETCH_START' }\n  | { type: 'FETCH_SUCCESS'; payload: any[] }\n  | { type: 'FETCH_ERROR'; payload: string };\n\nconst DataContext = createContext<{\n  state: State;\n  dispatch: React.Dispatch<Action>;\n} | null>(null);\n\n// \u4f7f\u7528\u793a\u4f8b\nfunction DataList() {\n  const { state, dispatch } = useContext(DataContext)!;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({ type: 'FETCH_START' });\n      try {\n        const response = await fetch('/api/data');\n        const data = await response.json();\n        dispatch({ type: 'FETCH_SUCCESS', payload: data });\n      } catch (error) {\n        dispatch({ type: 'FETCH_ERROR', payload: error.message });\n      }\n    };\n    fetchData();\n  }, []);\n\n  if (state.loading) return <div>Loading...</div>;\n  if (state.error) return <div>Error: {state.error}</div>;\n  return <div>{state.data.map(item => <Item key={item.id} {...item} />)}</div>;\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Redux (with Redux Toolkit):"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nconst fetchData = createAsyncThunk('data/fetch', async () => {\n  const response = await fetch('/api/data');\n  return response.json();\n});\n\nconst dataSlice = createSlice({\n  name: 'data',\n  initialState: { data: [], loading: false, error: null },\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchData.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(fetchData.fulfilled, (state, action) => {\n        state.loading = false;\n        state.data = action.payload;\n      })\n      .addCase(fetchData.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.error.message;\n      });\n  },\n});\n\n// \u4f7f\u7528\u793a\u4f8b\nfunction DataList() {\n  const { data, loading, error } = useSelector(state => state.data);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchData());\n  }, []);\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n  return <div>{data.map(item => <Item key={item.id} {...item} />)}</div>;\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Zustand:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"import create from 'zustand';\n\ninterface DataState {\n  data: any[];\n  loading: boolean;\n  error: string | null;\n  fetchData: () => Promise<void>;\n}\n\nconst useStore = create<DataState>((set) => ({\n  data: [],\n  loading: false,\n  error: null,\n  fetchData: async () => {\n    set({ loading: true });\n    try {\n      const response = await fetch('/api/data');\n      const data = await response.json();\n      set({ data, loading: false, error: null });\n    } catch (error) {\n      set({ error: error.message, loading: false });\n    }\n  },\n}));\n\n// \u4f7f\u7528\u793a\u4f8b\nfunction DataList() {\n  const { data, loading, error, fetchData } = useStore();\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n  return <div>{data.map(item => <Item key={item.id} {...item} />)}</div>;\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"2-\u8868\u5355\u72b6\u6001\u7ba1\u7406",children:"2. \u8868\u5355\u72b6\u6001\u7ba1\u7406"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"useContext + useReducer:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"type FormState = {\n  values: { [key: string]: string };\n  errors: { [key: string]: string };\n  touched: { [key: string]: boolean };\n};\n\ntype FormAction = \n  | { type: 'SET_FIELD_VALUE'; field: string; value: string }\n  | { type: 'SET_FIELD_ERROR'; field: string; error: string }\n  | { type: 'SET_FIELD_TOUCHED'; field: string };\n\n// \u4f7f\u7528\u793a\u4f8b\nfunction Form() {\n  const { state, dispatch } = useContext(FormContext)!;\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    dispatch({\n      type: 'SET_FIELD_VALUE',\n      field: e.target.name,\n      value: e.target.value,\n    });\n  };\n\n  return (\n    <form>\n      <input\n        name=\"email\"\n        value={state.values.email}\n        onChange={handleChange}\n      />\n      {state.errors.email && <span>{state.errors.email}</span>}\n    </form>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Redux:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"const formSlice = createSlice({\n  name: 'form',\n  initialState: {\n    values: {},\n    errors: {},\n    touched: {},\n  },\n  reducers: {\n    setFieldValue: (state, action) => {\n      state.values[action.payload.field] = action.payload.value;\n    },\n    setFieldError: (state, action) => {\n      state.errors[action.payload.field] = action.payload.error;\n    },\n    setFieldTouched: (state, action) => {\n      state.touched[action.payload.field] = true;\n    },\n  },\n});\n\n// \u4f7f\u7528\u793a\u4f8b\nfunction Form() {\n  const form = useSelector(state => state.form);\n  const dispatch = useDispatch();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    dispatch(formSlice.actions.setFieldValue({\n      field: e.target.name,\n      value: e.target.value,\n    }));\n  };\n\n  return (\n    <form>\n      <input\n        name=\"email\"\n        value={form.values.email}\n        onChange={handleChange}\n      />\n      {form.errors.email && <span>{form.errors.email}</span>}\n    </form>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Zustand:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:'interface FormState {\n  values: { [key: string]: string };\n  errors: { [key: string]: string };\n  touched: { [key: string]: boolean };\n  setFieldValue: (field: string, value: string) => void;\n  setFieldError: (field: string, error: string) => void;\n  setFieldTouched: (field: string) => void;\n}\n\nconst useFormStore = create<FormState>((set) => ({\n  values: {},\n  errors: {},\n  touched: {},\n  setFieldValue: (field, value) =>\n    set(state => ({\n      values: { ...state.values, [field]: value },\n    })),\n  setFieldError: (field, error) =>\n    set(state => ({\n      errors: { ...state.errors, [field]: error },\n    })),\n  setFieldTouched: (field) =>\n    set(state => ({\n      touched: { ...state.touched, [field]: true },\n    })),\n}));\n\n// \u4f7f\u7528\u793a\u4f8b\nfunction Form() {\n  const { values, errors, setFieldValue } = useFormStore();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFieldValue(e.target.name, e.target.value);\n  };\n\n  return (\n    <form>\n      <input\n        name="email"\n        value={values.email}\n        onChange={handleChange}\n      />\n      {errors.email && <span>{errors.email}</span>}\n    </form>\n  );\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u6027\u80fd\u5bf9\u6bd4\u5206\u6790",children:"\u6027\u80fd\u5bf9\u6bd4\u5206\u6790"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"1. \u5927\u89c4\u6a21\u6570\u636e\u66f4\u65b0"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"useContext + useReducer"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6bcf\u6b21\u72b6\u6001\u66f4\u65b0\u90fd\u4f1a\u89e6\u53d1\u6240\u6709\u6d88\u8d39\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u624b\u52a8\u5b9e\u73b0 memoization \u6765\u4f18\u5316\u6027\u80fd"}),"\n",(0,s.jsx)(e.li,{children:"\u9002\u5408\u5c0f\u89c4\u6a21\u6570\u636e\u548c\u7b80\u5355\u66f4\u65b0"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Redux"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5185\u7f6e\u9009\u62e9\u5668\u673a\u5236\uff0c\u53ea\u66f4\u65b0\u5fc5\u8981\u7684\u7ec4\u4ef6"}),"\n",(0,s.jsx)(e.li,{children:"\u652f\u6301\u6570\u636e\u89c4\u8303\u5316\u548c\u7f13\u5b58"}),"\n",(0,s.jsx)(e.li,{children:"\u9002\u5408\u590d\u6742\u7684\u6570\u636e\u5173\u7cfb\u548c\u9891\u7e41\u66f4\u65b0"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Zustand"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u81ea\u52a8\u6bd4\u8f83\u66f4\u65b0\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3"}),"\n",(0,s.jsx)(e.li,{children:"\u652f\u6301\u9009\u62e9\u6027\u8ba2\u9605\u72b6\u6001"}),"\n",(0,s.jsx)(e.li,{children:"\u9002\u5408\u4e2d\u7b49\u89c4\u6a21\u7684\u6570\u636e\u66f4\u65b0"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"2. \u5f00\u53d1\u5de5\u5177\u652f\u6301"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"useContext + useReducer"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"React DevTools \u57fa\u7840\u652f\u6301"}),"\n",(0,s.jsx)(e.li,{children:"\u65e0\u4e13\u95e8\u7684\u8c03\u8bd5\u5de5\u5177"}),"\n",(0,s.jsx)(e.li,{children:"\u72b6\u6001\u53d8\u5316\u8ffd\u8e2a\u8f83\u56f0\u96be"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Redux"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Redux DevTools \u63d0\u4f9b\u5b8c\u6574\u7684\u72b6\u6001\u8ffd\u8e2a"}),"\n",(0,s.jsx)(e.li,{children:"\u65f6\u95f4\u65c5\u884c\u8c03\u8bd5"}),"\n",(0,s.jsx)(e.li,{children:"\u72b6\u6001\u5feb\u7167\u548c\u5bfc\u5165/\u5bfc\u51fa"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Zustand"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u652f\u6301 Redux DevTools"}),"\n",(0,s.jsx)(e.li,{children:"\u57fa\u672c\u7684\u72b6\u6001\u8ffd\u8e2a\u529f\u80fd"}),"\n",(0,s.jsx)(e.li,{children:"\u76f8\u6bd4 Redux \u529f\u80fd\u8f83\u7b80\u5355"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"3. \u4ee3\u7801\u91cf\u5bf9\u6bd4"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"useContext + useReducer"}),": \u6700\u5c11\u7684\u6837\u677f\u4ee3\u7801\uff0c\u4f46\u53ef\u80fd\u9700\u8981\u66f4\u591a\u7684\u624b\u52a8\u4f18\u5316\u4ee3\u7801"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Redux"}),": \u8f83\u591a\u7684\u6837\u677f\u4ee3\u7801\uff0c\u4f46\u6709\u5b8c\u6574\u7684\u5de5\u5177\u548c\u6a21\u5f0f\u652f\u6301"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Zustand"}),": \u6700\u7b80\u6d01\u7684 API\uff0c\u9002\u4e2d\u7684\u4ee3\u7801\u91cf"]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>l,x:()=>c});var r=t(6540);const s={},i=r.createContext(s);function l(n){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);