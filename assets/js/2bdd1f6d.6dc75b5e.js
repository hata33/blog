"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7148],{1175:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"Vue/\u54cd\u5e94\u5f0f\u539f\u7406","title":"Vue \u54cd\u5e94\u5f0f\u539f\u7406","description":"1. Vue2 \u54cd\u5e94\u5f0f\u5b9e\u73b0","source":"@site/docs/90-Vue/91-\u54cd\u5e94\u5f0f\u539f\u7406.md","sourceDirName":"90-Vue","slug":"/Vue/\u54cd\u5e94\u5f0f\u539f\u7406","permalink":"/blog/docs/Vue/\u54cd\u5e94\u5f0f\u539f\u7406","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":91,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"React \u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4","permalink":"/blog/docs/react/\u72b6\u6001\u7ba1\u7406"},"next":{"title":"Vue \u751f\u547d\u5468\u671f","permalink":"/blog/docs/Vue/\u751f\u547d\u5468\u671f"}}');var s=t(4848),c=t(8453);const i={},a="Vue \u54cd\u5e94\u5f0f\u539f\u7406",o={},u=[{value:"1. Vue2 \u54cd\u5e94\u5f0f\u5b9e\u73b0",id:"1-vue2-\u54cd\u5e94\u5f0f\u5b9e\u73b0",level:2},{value:"Object.defineProperty",id:"objectdefineproperty",level:3},{value:"\u4f9d\u8d56\u6536\u96c6",id:"\u4f9d\u8d56\u6536\u96c6",level:3},{value:"2. Vue3 \u54cd\u5e94\u5f0f\u5b9e\u73b0",id:"2-vue3-\u54cd\u5e94\u5f0f\u5b9e\u73b0",level:2},{value:"Proxy",id:"proxy",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"vue-\u54cd\u5e94\u5f0f\u539f\u7406",children:"Vue \u54cd\u5e94\u5f0f\u539f\u7406"})}),"\n",(0,s.jsx)(n.h2,{id:"1-vue2-\u54cd\u5e94\u5f0f\u5b9e\u73b0",children:"1. Vue2 \u54cd\u5e94\u5f0f\u5b9e\u73b0"}),"\n",(0,s.jsx)(n.h3,{id:"objectdefineproperty",children:"Object.defineProperty"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function defineReactive(obj, key, val) {\n  const dep = new Dep()\n  \n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter() {\n      if (Dep.target) {\n        dep.depend()\n      }\n      return val\n    },\n    set: function reactiveSetter(newVal) {\n      if (newVal === val) return\n      val = newVal\n      dep.notify()\n    }\n  })\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4f9d\u8d56\u6536\u96c6",children:"\u4f9d\u8d56\u6536\u96c6"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"class Dep {\n  constructor() {\n    this.subscribers = new Set()\n  }\n  \n  depend() {\n    if (Dep.target) {\n      this.subscribers.add(Dep.target)\n    }\n  }\n  \n  notify() {\n    this.subscribers.forEach(sub => sub.update())\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"2-vue3-\u54cd\u5e94\u5f0f\u5b9e\u73b0",children:"2. Vue3 \u54cd\u5e94\u5f0f\u5b9e\u73b0"}),"\n",(0,s.jsx)(n.h3,{id:"proxy",children:"Proxy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function reactive(target) {\n  return new Proxy(target, {\n    get(target, key, receiver) {\n      const res = Reflect.get(target, key, receiver)\n      track(target, key)\n      return res\n    },\n    set(target, key, value, receiver) {\n      const res = Reflect.set(target, key, value, receiver)\n      trigger(target, key)\n      return res\n    }\n  })\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(6540);const s={},c=r.createContext(s);function i(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);