"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2818],{5033:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"react/router","title":"React Router \u8be6\u89e3","description":"1. \u8def\u7531\u6a21\u5f0f\u5bf9\u6bd4","source":"@site/docs/80-react/84-router.md","sourceDirName":"80-react","slug":"/react/router","permalink":"/blog/docs/react/router","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":84,"frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"React \u51fd\u6570\u7ec4\u4ef6\u6027\u80fd\u4f18\u5316","permalink":"/blog/docs/react/\u6027\u80fd\u4f18\u5316"},"next":{"title":"React \u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4","permalink":"/blog/docs/react/\u72b6\u6001\u7ba1\u7406"}}');var s=t(4848),i=t(8453);const o={},a="React Router \u8be6\u89e3",l={},d=[{value:"1. \u8def\u7531\u6a21\u5f0f\u5bf9\u6bd4",id:"1-\u8def\u7531\u6a21\u5f0f\u5bf9\u6bd4",level:2},{value:"Hash \u6a21\u5f0f vs History \u6a21\u5f0f",id:"hash-\u6a21\u5f0f-vs-history-\u6a21\u5f0f",level:3},{value:"Hash \u6a21\u5f0f",id:"hash-\u6a21\u5f0f",level:4},{value:"History \u6a21\u5f0f",id:"history-\u6a21\u5f0f",level:4},{value:"\u5b9e\u73b0\u539f\u7406",id:"\u5b9e\u73b0\u539f\u7406",level:3},{value:"Hash \u6a21\u5f0f\u539f\u7406",id:"hash-\u6a21\u5f0f\u539f\u7406",level:4},{value:"History \u6a21\u5f0f\u539f\u7406",id:"history-\u6a21\u5f0f\u539f\u7406",level:4},{value:"\u670d\u52a1\u5668\u914d\u7f6e\u793a\u4f8b",id:"\u670d\u52a1\u5668\u914d\u7f6e\u793a\u4f8b",level:4},{value:"\u4e24\u79cd\u6a21\u5f0f\u7684\u533a\u522b",id:"\u4e24\u79cd\u6a21\u5f0f\u7684\u533a\u522b",level:4},{value:"2. \u57fa\u672c\u8def\u7531\u914d\u7f6e",id:"2-\u57fa\u672c\u8def\u7531\u914d\u7f6e",level:2},{value:"\u8def\u7531\u5b9a\u4e49",id:"\u8def\u7531\u5b9a\u4e49",level:3},{value:"\u8def\u7531\u53c2\u6570\u83b7\u53d6",id:"\u8def\u7531\u53c2\u6570\u83b7\u53d6",level:3},{value:"3. \u8def\u7531\u5bfc\u822a",id:"3-\u8def\u7531\u5bfc\u822a",level:2},{value:"\u58f0\u660e\u5f0f\u5bfc\u822a",id:"\u58f0\u660e\u5f0f\u5bfc\u822a",level:3},{value:"\u7f16\u7a0b\u5f0f\u5bfc\u822a",id:"\u7f16\u7a0b\u5f0f\u5bfc\u822a",level:3},{value:"4. \u8def\u7531\u5b88\u536b",id:"4-\u8def\u7531\u5b88\u536b",level:2},{value:"\u6743\u9650\u63a7\u5236",id:"\u6743\u9650\u63a7\u5236",level:3},{value:"5. \u8def\u7531\u6570\u636e\u52a0\u8f7d",id:"5-\u8def\u7531\u6570\u636e\u52a0\u8f7d",level:2},{value:"\u4f7f\u7528 loader",id:"\u4f7f\u7528-loader",level:3},{value:"6. \u6700\u4f73\u5b9e\u8df5",id:"6-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u8def\u7531\u7ec4\u7ec7",id:"1-\u8def\u7531\u7ec4\u7ec7",level:3},{value:"2. \u61d2\u52a0\u8f7d\u8def\u7531",id:"2-\u61d2\u52a0\u8f7d\u8def\u7531",level:3},{value:"3. \u7c7b\u578b\u5b89\u5168\u7684\u8def\u7531",id:"3-\u7c7b\u578b\u5b89\u5168\u7684\u8def\u7531",level:3}];function h(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"react-router-\u8be6\u89e3",children:"React Router \u8be6\u89e3"})}),"\n",(0,s.jsx)(e.h2,{id:"1-\u8def\u7531\u6a21\u5f0f\u5bf9\u6bd4",children:"1. \u8def\u7531\u6a21\u5f0f\u5bf9\u6bd4"}),"\n",(0,s.jsx)(e.h3,{id:"hash-\u6a21\u5f0f-vs-history-\u6a21\u5f0f",children:"Hash \u6a21\u5f0f vs History \u6a21\u5f0f"}),"\n",(0,s.jsx)(e.h4,{id:"hash-\u6a21\u5f0f",children:"Hash \u6a21\u5f0f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"// URL \u793a\u4f8b: http://example.com/#/home\nimport { HashRouter } from 'react-router-dom';\n\nfunction App() {\n  return (\n    <HashRouter>\n      <Routes>\n        <Route path=\"/home\" element={<Home />} />\n      </Routes>\n    </HashRouter>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7279\u70b9\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["URL \u4e2d\u5e26\u6709 ",(0,s.jsx)(e.code,{children:"#"})," \u53f7"]}),"\n",(0,s.jsx)(e.li,{children:"\u517c\u5bb9\u6027\u597d\uff0c\u652f\u6301\u8001\u7248\u672c\u6d4f\u89c8\u5668"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u9700\u8981\u670d\u52a1\u5668\u914d\u7f6e"}),"\n",(0,s.jsx)(e.li,{children:"\u5237\u65b0\u9875\u9762\u4e0d\u4f1a 404"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7f3a\u70b9\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"URL \u4e0d\u591f\u7f8e\u89c2"}),"\n",(0,s.jsx)(e.li,{children:"\u5bf9 SEO \u4e0d\u53cb\u597d"}),"\n",(0,s.jsx)(e.li,{children:"\u6709\u4e9b\u7edf\u8ba1\u5de5\u5177\u53ef\u80fd\u65e0\u6cd5\u83b7\u53d6 URL \u4e2d # \u540e\u9762\u7684\u5185\u5bb9"}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"history-\u6a21\u5f0f",children:"History \u6a21\u5f0f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"// URL \u793a\u4f8b: http://example.com/home\nimport { BrowserRouter } from 'react-router-dom';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"/home\" element={<Home />} />\n      </Routes>\n    </BrowserRouter>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7279\u70b9\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"URL \u66f4\u52a0\u7f8e\u89c2"}),"\n",(0,s.jsx)(e.li,{children:"\u6709\u5229\u4e8e SEO"}),"\n",(0,s.jsx)(e.li,{children:"\u53ef\u4ee5\u4f7f\u7528\u6d4f\u89c8\u5668\u7684\u524d\u8fdb\u540e\u9000\u529f\u80fd"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7f3a\u70b9\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u670d\u52a1\u5668\u914d\u7f6e\u652f\u6301"}),"\n",(0,s.jsx)(e.li,{children:"\u5237\u65b0\u9875\u9762\u53ef\u80fd\u4f1a 404\uff08\u9700\u8981\u670d\u52a1\u5668\u914d\u7f6e\u5904\u7406\uff09"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u5b9e\u73b0\u539f\u7406",children:"\u5b9e\u73b0\u539f\u7406"}),"\n",(0,s.jsx)(e.h4,{id:"hash-\u6a21\u5f0f\u539f\u7406",children:"Hash \u6a21\u5f0f\u539f\u7406"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"class HashRouter {\n  constructor() {\n    // \u76d1\u542c hash \u53d8\u5316\n    window.addEventListener('hashchange', this.handleHashChange);\n    // \u521d\u59cb\u5316\u65f6\u4e5f\u9700\u8981\u89e6\u53d1\u4e00\u6b21\n    window.addEventListener('load', this.handleHashChange);\n  }\n\n  handleHashChange = () => {\n    // \u83b7\u53d6\u5f53\u524d hash \u503c\uff0c\u53bb\u9664 # \u53f7\n    const hash = window.location.hash.slice(1);\n    // \u6839\u636e hash \u6e32\u67d3\u5bf9\u5e94\u7ec4\u4ef6\n    this.render(hash);\n  }\n\n  // \u624b\u52a8\u66f4\u6539 hash\n  push(path: string) {\n    window.location.hash = path;\n  }\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5de5\u4f5c\u539f\u7406\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u901a\u8fc7\u76d1\u542c ",(0,s.jsx)(e.code,{children:"hashchange"})," \u4e8b\u4ef6\u6765\u76d1\u6d4b\u8def\u7531\u53d8\u5316"]}),"\n",(0,s.jsxs)(e.li,{children:["URL \u4e2d ",(0,s.jsx)(e.code,{children:"#"})," \u540e\u9762\u7684\u5185\u5bb9\u53d1\u751f\u53d8\u5316\u65f6\u4e0d\u4f1a\u89e6\u53d1\u9875\u9762\u91cd\u65b0\u52a0\u8f7d"]}),"\n",(0,s.jsxs)(e.li,{children:["\u901a\u8fc7 ",(0,s.jsx)(e.code,{children:"window.location.hash"})," \u6765\u83b7\u53d6\u548c\u8bbe\u7f6e hash \u503c"]}),"\n",(0,s.jsx)(e.li,{children:"\u517c\u5bb9\u6027\u597d\uff0c\u56e0\u4e3a hash \u53d8\u5316\u4e0d\u4f1a\u5bfc\u81f4\u9875\u9762\u5237\u65b0"}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"history-\u6a21\u5f0f\u539f\u7406",children:"History \u6a21\u5f0f\u539f\u7406"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"class HistoryRouter {\n  constructor() {\n    // \u76d1\u542c popstate \u4e8b\u4ef6\n    window.addEventListener('popstate', this.handlePopState);\n    // \u521d\u59cb\u5316\u65f6\u9700\u8981\u624b\u52a8\u89e6\u53d1\u4e00\u6b21\u6e32\u67d3\n    this.handlePopState();\n  }\n\n  handlePopState = () => {\n    // \u83b7\u53d6\u5f53\u524d\u8def\u5f84\n    const path = window.location.pathname;\n    // \u6839\u636e\u8def\u5f84\u6e32\u67d3\u5bf9\u5e94\u7ec4\u4ef6\n    this.render(path);\n  }\n\n  // \u624b\u52a8\u66f4\u6539\u8def\u7531\n  push(path: string, state = {}) {\n    // \u4f7f\u7528 History API \u66f4\u6539 URL\n    window.history.pushState(state, '', path);\n    // \u624b\u52a8\u89e6\u53d1\u6e32\u67d3\uff0c\u56e0\u4e3a pushState \u4e0d\u4f1a\u89e6\u53d1 popstate \u4e8b\u4ef6\n    this.handlePopState();\n  }\n\n  // \u66ff\u6362\u5f53\u524d\u8def\u7531\n  replace(path: string, state = {}) {\n    window.history.replaceState(state, '', path);\n    this.handlePopState();\n  }\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5de5\u4f5c\u539f\u7406\uff1a"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528 HTML5 \u7684 History API \u6765\u7ba1\u7406\u8def\u7531"}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"pushState"})," \u548c ",(0,s.jsx)(e.code,{children:"replaceState"})," \u65b9\u6cd5\u6539\u53d8 URL \u4f46\u4e0d\u4f1a\u89e6\u53d1\u9875\u9762\u5237\u65b0"]}),"\n",(0,s.jsxs)(e.li,{children:["\u901a\u8fc7\u76d1\u542c ",(0,s.jsx)(e.code,{children:"popstate"})," \u4e8b\u4ef6\u6765\u68c0\u6d4b\u6d4f\u89c8\u5668\u524d\u8fdb/\u540e\u9000"]}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u670d\u52a1\u5668\u914d\u7f6e\u652f\u6301\uff0c\u5426\u5219\u5237\u65b0\u9875\u9762\u4f1a 404"}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u670d\u52a1\u5668\u914d\u7f6e\u793a\u4f8b",children:"\u670d\u52a1\u5668\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Nginx \u914d\u7f6e\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-nginx",children:"location / {\n  try_files $uri $uri/ /index.html;\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Node.js Express \u914d\u7f6e\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"const express = require('express');\nconst path = require('path');\nconst app = express();\n\n// \u6240\u6709\u8bf7\u6c42\u90fd\u8fd4\u56de index.html\napp.get('*', (req, res) => {\n  res.sendFile(path.join(__dirname, 'public', 'index.html'));\n});\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u4e24\u79cd\u6a21\u5f0f\u7684\u533a\u522b",children:"\u4e24\u79cd\u6a21\u5f0f\u7684\u533a\u522b"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u7279\u6027"}),(0,s.jsx)(e.th,{children:"Hash \u6a21\u5f0f"}),(0,s.jsx)(e.th,{children:"History \u6a21\u5f0f"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"URL \u683c\u5f0f"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"/#/path"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"/path"})})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u670d\u52a1\u5668\u914d\u7f6e"}),(0,s.jsx)(e.td,{children:"\u4e0d\u9700\u8981"}),(0,s.jsx)(e.td,{children:"\u9700\u8981"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u517c\u5bb9\u6027"}),(0,s.jsx)(e.td,{children:"\u597d"}),(0,s.jsx)(e.td,{children:"\u4ec5 HTML5"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"SEO"}),(0,s.jsx)(e.td,{children:"\u4e0d\u53cb\u597d"}),(0,s.jsx)(e.td,{children:"\u53cb\u597d"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u4e8b\u4ef6\u76d1\u542c"}),(0,s.jsx)(e.td,{children:"hashchange"}),(0,s.jsx)(e.td,{children:"popstate"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u72b6\u6001\u7ba1\u7406"}),(0,s.jsx)(e.td,{children:"\u4ec5 hash \u90e8\u5206"}),(0,s.jsx)(e.td,{children:"\u5b8c\u6574 state \u5bf9\u8c61"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u5237\u65b0\u9875\u9762"}),(0,s.jsx)(e.td,{children:"\u4e0d\u4f1a 404"}),(0,s.jsx)(e.td,{children:"\u53ef\u80fd 404"})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"2-\u57fa\u672c\u8def\u7531\u914d\u7f6e",children:"2. \u57fa\u672c\u8def\u7531\u914d\u7f6e"}),"\n",(0,s.jsx)(e.h3,{id:"\u8def\u7531\u5b9a\u4e49",children:"\u8def\u7531\u5b9a\u4e49"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:'import { BrowserRouter, Routes, Route } from \'react-router-dom\';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Routes>\n        {/* \u57fa\u7840\u8def\u7531 */}\n        <Route path="/" element={<Home />} />\n        \n        {/* \u5e26\u53c2\u6570\u7684\u8def\u7531 */}\n        <Route path="/user/:id" element={<UserProfile />} />\n        \n        {/* \u5d4c\u5957\u8def\u7531 */}\n        <Route path="/settings" element={<Settings />}>\n          <Route path="profile" element={<Profile />} />\n          <Route path="account" element={<Account />} />\n        </Route>\n        \n        {/* 404 \u9875\u9762 */}\n        <Route path="*" element={<NotFound />} />\n      </Routes>\n    </BrowserRouter>\n  );\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u8def\u7531\u53c2\u6570\u83b7\u53d6",children:"\u8def\u7531\u53c2\u6570\u83b7\u53d6"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"import { useParams, useSearchParams } from 'react-router-dom';\n\nfunction UserProfile() {\n  // \u83b7\u53d6\u8def\u5f84\u53c2\u6570\n  const { id } = useParams<{ id: string }>();\n  \n  // \u83b7\u53d6\u67e5\u8be2\u53c2\u6570\n  const [searchParams] = useSearchParams();\n  const tab = searchParams.get('tab');\n  \n  return (\n    <div>\n      <h1>User ID: {id}</h1>\n      <p>Current Tab: {tab}</p>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"3-\u8def\u7531\u5bfc\u822a",children:"3. \u8def\u7531\u5bfc\u822a"}),"\n",(0,s.jsx)(e.h3,{id:"\u58f0\u660e\u5f0f\u5bfc\u822a",children:"\u58f0\u660e\u5f0f\u5bfc\u822a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"import { Link, NavLink } from 'react-router-dom';\n\nfunction Navigation() {\n  return (\n    <nav>\n      {/* \u57fa\u7840\u94fe\u63a5 */}\n      <Link to=\"/home\">Home</Link>\n      \n      {/* \u5e26\u72b6\u6001\u7684\u94fe\u63a5 */}\n      <Link \n        to=\"/dashboard\"\n        state={{ from: 'navigation' }}\n      >\n        Dashboard\n      </Link>\n      \n      {/* \u5e26\u6fc0\u6d3b\u6837\u5f0f\u7684\u94fe\u63a5 */}\n      <NavLink \n        to=\"/profile\"\n        className={({ isActive }) => isActive ? 'active' : ''}\n      >\n        Profile\n      </NavLink>\n    </nav>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u7f16\u7a0b\u5f0f\u5bfc\u822a",children:"\u7f16\u7a0b\u5f0f\u5bfc\u822a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"import { useNavigate, useLocation } from 'react-router-dom';\n\nfunction LoginButton() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  \n  const handleLogin = async () => {\n    const success = await login();\n    if (success) {\n      // \u57fa\u7840\u8df3\u8f6c\n      navigate('/dashboard');\n      \n      // \u5e26\u72b6\u6001\u8df3\u8f6c\n      navigate('/dashboard', { \n        state: { from: location.pathname } \n      });\n      \n      // \u66ff\u6362\u5f53\u524d\u5386\u53f2\u8bb0\u5f55\n      navigate('/dashboard', { replace: true });\n      \n      // \u8fd4\u56de\u4e0a\u4e00\u9875\n      navigate(-1);\n    }\n  };\n  \n  return <button onClick={handleLogin}>Login</button>;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"4-\u8def\u7531\u5b88\u536b",children:"4. \u8def\u7531\u5b88\u536b"}),"\n",(0,s.jsx)(e.h3,{id:"\u6743\u9650\u63a7\u5236",children:"\u6743\u9650\u63a7\u5236"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:'import { Navigate, useLocation } from \'react-router-dom\';\n\n// \u53d7\u4fdd\u62a4\u7684\u8def\u7531\u7ec4\u4ef6\nfunction ProtectedRoute({ children }: { children: React.ReactNode }) {\n  const auth = useAuth(); // \u81ea\u5b9a\u4e49 hook \u83b7\u53d6\u8ba4\u8bc1\u72b6\u6001\n  const location = useLocation();\n  \n  if (!auth.isAuthenticated) {\n    // \u91cd\u5b9a\u5411\u5230\u767b\u5f55\u9875\uff0c\u5e76\u8bb0\u5f55\u6765\u6e90\u9875\u9762\n    return <Navigate \n      to="/login" \n      state={{ from: location.pathname }}\n      replace \n    />;\n  }\n  \n  return <>{children}</>;\n}\n\n// \u4f7f\u7528\u793a\u4f8b\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path="/login" element={<Login />} />\n        <Route\n          path="/dashboard"\n          element={\n            <ProtectedRoute>\n              <Dashboard />\n            </ProtectedRoute>\n          }\n        />\n      </Routes>\n    </BrowserRouter>\n  );\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"5-\u8def\u7531\u6570\u636e\u52a0\u8f7d",children:"5. \u8def\u7531\u6570\u636e\u52a0\u8f7d"}),"\n",(0,s.jsx)(e.h3,{id:"\u4f7f\u7528-loader",children:"\u4f7f\u7528 loader"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"import { \n  createBrowserRouter, \n  RouterProvider,\n  useLoaderData \n} from 'react-router-dom';\n\n// \u5b9a\u4e49\u6570\u636e\u52a0\u8f7d\u51fd\u6570\nasync function userLoader({ params }) {\n  const response = await fetch(`/api/users/${params.id}`);\n  if (!response.ok) {\n    throw new Error('Failed to fetch user');\n  }\n  return response.json();\n}\n\n// \u4f7f\u7528 loader \u7684\u7ec4\u4ef6\nfunction UserProfile() {\n  const user = useLoaderData();\n  \n  return (\n    <div>\n      <h1>{user.name}</h1>\n      <p>{user.email}</p>\n    </div>\n  );\n}\n\n// \u8def\u7531\u914d\u7f6e\nconst router = createBrowserRouter([\n  {\n    path: \"/user/:id\",\n    element: <UserProfile />,\n    loader: userLoader,\n    errorElement: <ErrorBoundary />\n  }\n]);\n\n// \u5e94\u7528\u5165\u53e3\nfunction App() {\n  return <RouterProvider router={router} />;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"6-\u6700\u4f73\u5b9e\u8df5",children:"6. \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsx)(e.h3,{id:"1-\u8def\u7531\u7ec4\u7ec7",children:"1. \u8def\u7531\u7ec4\u7ec7"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"// routes/index.tsx\nimport { RouteObject } from 'react-router-dom';\nimport { mainRoutes } from './main';\nimport { authRoutes } from './auth';\nimport { adminRoutes } from './admin';\n\nexport const routes: RouteObject[] = [\n  ...mainRoutes,\n  ...authRoutes,\n  ...adminRoutes\n];\n\n// routes/main.tsx\nexport const mainRoutes = [\n  {\n    path: '/',\n    element: <Layout />,\n    children: [\n      { path: '', element: <Home /> },\n      { path: 'about', element: <About /> }\n    ]\n  }\n];\n"})}),"\n",(0,s.jsx)(e.h3,{id:"2-\u61d2\u52a0\u8f7d\u8def\u7531",children:"2. \u61d2\u52a0\u8f7d\u8def\u7531"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"import { lazy, Suspense } from 'react';\nimport { Routes, Route } from 'react-router-dom';\n\nconst Dashboard = lazy(() => import('./pages/Dashboard'));\nconst Settings = lazy(() => import('./pages/Settings'));\n\nfunction App() {\n  return (\n    <Routes>\n      <Route\n        path=\"/dashboard/*\"\n        element={\n          <Suspense fallback={<Loading />}>\n            <Dashboard />\n          </Suspense>\n        }\n      />\n    </Routes>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"3-\u7c7b\u578b\u5b89\u5168\u7684\u8def\u7531",children:"3. \u7c7b\u578b\u5b89\u5168\u7684\u8def\u7531"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"// routes/types.ts\nexport type AppRoutes = {\n  home: '/';\n  user: '/user/:id';\n  settings: '/settings';\n};\n\n// hooks/useTypedNavigate.ts\nimport { useNavigate } from 'react-router-dom';\nimport { AppRoutes } from '../routes/types';\n\nexport function useTypedNavigate() {\n  const navigate = useNavigate();\n  \n  return {\n    toUser: (id: string) => navigate(`/user/${id}`),\n    toSettings: () => navigate('/settings'),\n    toHome: () => navigate('/')\n  };\n}\n"})})]})}function c(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>a});var r=t(6540);const s={},i=r.createContext(s);function o(n){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);